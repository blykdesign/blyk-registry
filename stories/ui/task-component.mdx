import { Meta, Canvas } from '@storybook/addon-docs/blocks'
import * as Stories from './task-component.stories'
import { DocDivider, DocPropsTable, ThemeBadge, Tip } from '../doc-display'

<Meta of={Stories} />

# TaskComponent

<ThemeBadge
  theme="DF Imóveis"
  description="This component belongs to the DF Imóveis theme."
/>

A task card component used to display scheduled visits and to-do tasks. Supports two distinct types — **Visita** (visit) and **Tarefa** (task) — each with its own layout and visual indicator.

## Installation

```bash
npx shadcn@latest add "https://registry.blyk.design/r/df-imoveis/task-component.json"
```

## Usage

```tsx
import { TaskComponent } from "@/components/ui/task-component"
import { Separator } from "@/components/ui/separator"
import { User } from "lucide-react"

// Visita
<TaskComponent
  type="visita"
  timeSlot={{ time: <span className="text-lg font-bold text-primary">14:00</span>, badge: "hoje" }}
  title="Marcos Oliveira"
  descriptions={["SQS 308 Bloco A, Apartamento 302", "Asa Sul, Brasília - DF"]}
/>

// Tarefa (interactive)
<TaskComponent
  type="tarefa"
  checked={checked}
  onCheckedChange={setChecked}
  badge="Urgente"
  badgeVariant="secondary"
  title="Ligar para o lead"
  meta={["Hoje, 15:00", <Separator />, <><User /> Ana Carolina</>]}
/>
```

<Tip>
  Switch to the <strong>DF Imóveis</strong> theme using the toolbar above to see this component with the correct brand colors applied.
</Tip>

<DocDivider />

## Visita

A scheduled visit card featuring a time slot on the left, a status badge, and the client's name and address on the right. The left indicator bar is **green** (emerald-500).

<Canvas of={Stories.Visita} />

<DocDivider />

## Tarefa

A to-do task card with a circular checkbox, urgency badge, task title, and a metadata row showing date/time and the associated lead. The left indicator bar is **purple** (violet-500). The checkbox is interactive — clicking it toggles the done state.

<Canvas of={Stories.Tarefa} />

<DocDivider />

## API

### Visita (type="visita")

<DocPropsTable
  rows={[
    { prop: "type", type: '"visita"', required: "Yes", description: "Visit type" },
    { prop: "done", type: "boolean", required: "No", description: "When true, applies 50% opacity" },
    { prop: "timeSlot", type: "{ time: ReactNode; badge?: ReactNode }", required: "Yes", description: "Time display and optional badge" },
    { prop: "title", type: "ReactNode", required: "Yes", description: "Client name" },
    { prop: "descriptions", type: "ReactNode[]", required: "Yes", description: "Address lines" },
    { prop: "className", type: "string", required: "No", description: "Additional CSS classes" },
  ]}
/>

### Tarefa (type="tarefa")

<DocPropsTable
  rows={[
    { prop: "type", type: '"tarefa"', required: "Yes", description: "Task type" },
    { prop: "done", type: "boolean", required: "No", description: "When true, applies 50% opacity" },
    { prop: "checked", type: "boolean", required: "No", description: "Checkbox state" },
    { prop: "onCheckedChange", type: "(checked: boolean) => void", required: "No", description: "Checkbox toggle callback" },
    { prop: "badge", type: "ReactNode", required: "No", description: 'Urgency badge (e.g. "Urgente")' },
    { prop: "badgeVariant", type: '"default" | "secondary"', required: "No", description: "Badge style" },
    { prop: "title", type: "ReactNode", required: "Yes", description: "Task title" },
    { prop: "meta", type: "ReactNode[]", required: "Yes", description: "Metadata items (date, assignee, etc.)" },
    { prop: "className", type: "string", required: "No", description: "Additional CSS classes" },
  ]}
/>

import { Meta, Canvas, Controls, ArgTypes } from '@storybook/addon-docs/blocks'
import * as Stories from './task-component.stories'
import { DocDivider, ThemeBadge, Tip, DocGrid, SubComponentCard } from '../doc-display'

<Meta of={Stories} />

# TaskComponent

<ThemeBadge
  theme="DF Imóveis"
  description="This component belongs to the DF Imóveis theme."
/>

A task card component used to display scheduled visits and to-do tasks. Supports two distinct types — **Visita** (visit) and **Tarefa** (task) — each with its own layout and visual indicator.

Built as a compound component, giving you full control over the layout and composition of each task type.

## Installation

```bash
npx shadcn@latest add "https://registry.blyk.design/r/df-imoveis/task-component.json"
```

## Usage

```tsx
import {
  TaskComponent,
  TaskComponentTimeSlot,
  TaskComponentCheckbox,
  TaskComponentContent,
  TaskComponentBadge,
  TaskComponentTitle,
  TaskComponentDescription,
  TaskComponentMeta,
  TaskComponentMetaItem,
} from "@/components/ui/task-component"
```

<Tip>
  Switch to the <strong>DF Imóveis</strong> theme using the toolbar above to see this component with the correct brand colors applied.
</Tip>

<DocDivider />

## Visita

A scheduled visit card featuring a time slot on the left, a status badge, and the client's name and address on the right. The left indicator bar is **green** (emerald-500).

```tsx
<TaskComponent type="visita">
  <TaskComponentTimeSlot>
    <span className="text-lg font-bold leading-none text-primary">14:00</span>
    <TaskComponentBadge>hoje</TaskComponentBadge>
  </TaskComponentTimeSlot>
  <TaskComponentContent>
    <TaskComponentTitle>Marcos Oliveira</TaskComponentTitle>
    <TaskComponentDescription>SQS 308 Bloco A, Apartamento 302</TaskComponentDescription>
    <TaskComponentDescription className="font-normal">Asa Sul, Brasília - DF</TaskComponentDescription>
  </TaskComponentContent>
</TaskComponent>
```

<Canvas of={Stories.Visita} />

<DocDivider />

## Tarefa

A to-do task card with a circular checkbox, urgency badge, task title, and a metadata row showing date/time and the associated lead. The left indicator bar is **purple** (violet-500). The checkbox is interactive — clicking it toggles the done state.

```tsx
<TaskComponent type="tarefa" done={checked}>
  <TaskComponentCheckbox checked={checked} onCheckedChange={setChecked} />
  <TaskComponentContent>
    <TaskComponentBadge variant="secondary">Urgente</TaskComponentBadge>
    <TaskComponentTitle>Ligar para o lead</TaskComponentTitle>
    <TaskComponentMeta>
      <TaskComponentMetaItem>Hoje, 15:00</TaskComponentMetaItem>
      <Separator orientation="vertical" className="!h-5" />
      <TaskComponentMetaItem>
        <User className="size-4" /> Ana Carolina
      </TaskComponentMetaItem>
    </TaskComponentMeta>
  </TaskComponentContent>
</TaskComponent>
```

<Canvas of={Stories.Tarefa} />

<DocDivider />

## Anatomy

Each type has a distinct structure, but both share the same root container:

<DocGrid columns={2}>
  <div>
    **Visita**
    ```
    TaskComponent (type="visita")
    ├── ██ Indicator bar (green)
    └── Flex
        ├── TaskComponentTimeSlot
        │   ├── Time text
        │   └── TaskComponentBadge
        └── TaskComponentContent
            ├── TaskComponentTitle
            └── TaskComponentDescription (×N)
    ```
  </div>
  <div>
    **Tarefa**
    ```
    TaskComponent (type="tarefa")
    ├── ██ Indicator bar (purple)
    └── Flex
        ├── TaskComponentCheckbox
        └── TaskComponentContent
            ├── TaskComponentBadge
            ├── TaskComponentTitle
            └── TaskComponentMeta
                └── TaskComponentMetaItem (×N)
    ```
  </div>
</DocGrid>

<DocDivider />

## Props

### TaskComponent (root)

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `type` | `"visita"` \| `"tarefa"` | `"visita"` | Controls the indicator bar color and inner layout gap. |
| `done` | `boolean` | `false` | When `true`, applies 50% opacity to the entire card. |

### TaskComponentCheckbox

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `checked` | `boolean` | `false` | Whether the checkbox is checked. |
| `onCheckedChange` | `(checked: boolean) => void` | — | Callback fired when the checkbox is toggled. |

### TaskComponentBadge

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `variant` | `"default"` \| `"secondary"` | `"default"` | `default` uses primary colors (e.g. "hoje" badge). `secondary` uses muted tones (e.g. "Urgente" badge). |

<DocDivider />

## Sub-components

<DocGrid columns={2}>
  <SubComponentCard
    name="TaskComponent"
    description="Root container with colored indicator bar and done state."
  />
  <SubComponentCard
    name="TaskComponentTimeSlot"
    description="64px centered column for time and badge (Visita)."
  />
  <SubComponentCard
    name="TaskComponentCheckbox"
    description="Circular checkbox with checked/unchecked states (Tarefa)."
  />
  <SubComponentCard
    name="TaskComponentContent"
    description="Vertical flex container for the main text content."
  />
  <SubComponentCard
    name="TaskComponentBadge"
    description="Pill badge with 'default' and 'secondary' variants."
  />
  <SubComponentCard
    name="TaskComponentTitle"
    description="Bold primary text — client name or task title."
  />
  <SubComponentCard
    name="TaskComponentDescription"
    description="Secondary muted text — address, location details."
  />
  <SubComponentCard
    name="TaskComponentMeta"
    description="Horizontal row for metadata items with icon support."
  />
  <SubComponentCard
    name="TaskComponentMetaItem"
    description="Individual metadata item within the meta row."
  />
</DocGrid>
